!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.s=e()}}(function(){return function e(t,a,n){function r(i,s){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var h=a[i]={exports:{}};t[i][0].call(h.exports,function(e){var a=t[i][1][e];return r(a?a:e)},h,h.exports,e,t,a,n)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,a){"use strict";var n;!function(e){e[e.Converged=0]="Converged",e[e.MaxStepsExceeded=1]="MaxStepsExceeded",e[e.EarlyReturn=2]="EarlyReturn"}(n=a.Outcome||(a.Outcome={}));var r=function(){function e(e){this.n=e,this.uRound=2.3e-16,this.maxSteps=1e4,this.initialStepSize=1e-4,this.maxStepSize=0,this.maxExtrapolationColumns=9,this.stepSizeSequence=0,this.stabilityCheckCount=1,this.stabilityCheckTableLines=2,this.denseOutput=!1,this.denseOutputErrorEstimator=!0,this.denseComponents=void 0,this.interpolationFormulaDegree=4,this.stepSizeReductionFactor=.5,this.stepSizeFac1=.02,this.stepSizeFac2=4,this.stepSizeFac3=.8,this.stepSizeFac4=.9,this.stepSafetyFactor1=.65,this.stepSafetyFactor2=.94,this.relativeTolerance=1e-5,this.absoluteTolerance=1e-5,this.debug=!1}return e.prototype.grid=function(e,t){var a=this.denseComponents;if(!a){a=[];for(var n=0;n<this.n;++n)a.push(n)}var r;return function(n,o,i,s,c){if(1===n)return t(i,s),void(r=i+e);for(;r<=i;){for(var u=[],h=0,f=a;h<f.length;h++){var l=f[h];u.push(c(l,r))}t(r,u),r+=e}}},e.dim2=function(t,a){for(var n=new Array(t+1),r=1;r<=t;++r)n[r]=e.dim(a);return n},e.stepSizeSequence=function(e,t){var a=new Array(t+1);switch(a[0]=0,e){case 1:for(var n=1;n<=t;++n)a[n]=2*n;break;case 2:a[1]=2;for(var n=2;n<=t;++n)a[n]=4*n-4;break;case 3:a[1]=2,a[2]=4,a[3]=6;for(var n=4;n<=t;++n)a[n]=2*a[n-2];break;case 4:for(var n=1;n<=t;++n)a[n]=4*n-2;break;case 5:for(var n=1;n<=t;++n)a[n]=4*n;break;default:throw new Error("invalid stepSizeSequence selected")}return a},e.prototype.solve=function(t,a,r,o,i){function s(e,t){var a=[0];if(Array.isArray(e))return a.concat(e);for(var n=0;n<t;++n)a.push(e);return a}var c=this,u=[0].concat(r),h=e.dim(this.n),f=e.dim(this.n),l=e.dim(this.n);if(this.maxSteps<=0)throw new Error("maxSteps must be positive");var d=this.maxExtrapolationColumns;if(d<=2)throw new Error("maxExtrapolationColumns must be > 2");var v=this.stepSizeSequence||(this.denseOutput?4:1);if(v<=3&&this.denseOutput)throw new Error("stepSizeSequence incompatible with denseOutput");if(this.denseOutput&&!i)throw new Error("denseOutput requires a solution observer function");if(this.interpolationFormulaDegree<=0||this.interpolationFormulaDegree>=7)throw new Error("bad interpolationFormulaDegree");var m=[0],p=0;if(this.denseOutput)if(this.denseComponents)for(var g=0,S=this.denseComponents;g<S.length;g++){var M=S[g];if(M<0||M>this.n)throw new Error("bad dense component: "+M);m.push(M+1),++p}else{for(var x=1;x<=this.n;++x)m.push(x);p=this.n}if(this.uRound<=1e-35||this.uRound>1)throw new Error("suspicious value of uRound");var w=Math.abs(this.maxStepSize||o-a),y=2*d*d+d,I=s(this.absoluteTolerance,this.n),E=s(this.relativeTolerance,this.n),b=[0,0,0,0],z=b[0],F=b[1],C=b[2],L=b[3],R=Math.max(1,p),P=Math.max(1,(2*d+5)*p),B=e.dim(P),A=e.dim2(y,R),O=function(e,a,n){for(var r=t(e,a.slice(1)),o=0;o<r.length;++o)n[o+1]=r[o]},T=function(){var t,r,s,p=function(e){if(N=a,a+=j,c.denseOutput){s=2*re-c.interpolationFormulaDegree+1;for(var n=1;n<=R;++n)B[n]=u[m[n]];t=N,r=j;for(var n=1;n<=R;++n)B[R+n]=j*h[m[n]];for(var o=2*R,n=1;n<=R;++n)B[o+n]=b[1][m[n]];for(var p=2;p<=re;++p)for(var g=P[p],w=p;w>=2;--w)for(var I=Math.pow(g/P[w-1],2)-1,n=1;n<=R;++n)x[w-1][n]=x[w][n]+(x[w][n]-x[w-1][n])/I;for(var E=4*R,n=1;n<=R;++n)B[E+n]=x[1][n];for(var n=1;n<=e;++n)f[n]=b[1][n];O(a,f,l),E=3*R;for(var n=1;n<=R;++n)B[E+n]=l[m[n]]*j;for(var z=1;z<=s;++z){for(var F=(z+1)/2|0,q=F;q<=re;++q){var K=Math.pow(P[q]/2,z-1);_=U[q+1]-2*q+z;for(var n=1;n<=R;++n)x[q][n]=A[_][n]*K}for(var p=F+1;p<=re;++p)for(var g=P[p],w=p;w>=F+1;--w)for(var I=Math.pow(g/P[w-1],2)-1,n=1;n<=R;++n)x[w-1][n]=x[w][n]+(x[w][n]-x[w-1][n])/I;E=(z+4)*R;for(var n=1;n<=R;++n)B[E+n]=x[F][n]*j;if(z!==s){for(var q=(z+2)/2|0;q<=re;++q){var W=U[q+1],X=U[q]+z+1;1===z&&4===v&&(X+=2);var w=void 0;for(w=W;w>=X;w-=2)for(var n=1;n<=R;++n)A[w][n]-=A[w-2][n];if(1===z&&4===v){w=X-2;for(var n=1;n<=R;++n)A[w][n]-=h[m[n]]}}for(var q=(z+2)/2|0;q<=re;++q)for(var W=U[q+1]-1,X=U[q]+z+2,w=W;w>=X;w-=2)for(var n=1;n<=R;++n)A[w][n]-=A[w-2][n]}}if(S(R,B,s),c.denseOutputErrorEstimator&&s>=1){for(var Y=0,n=1;n<=R;++n)Y+=Math.pow(B[(s+4)*R+n]/k[m[n]],2);if(Y=Math.sqrt(Y/R)*H[s],Z=j/Math.max(Math.pow(Y,1/(s+4)),.01),Y>10)return j=Z,a=N,++L,ae=!0,!0}for(var n=1;n<=e;++n)h[n]=l[n]}for(var n=1;n<=e;++n)u[n]=b[1][n];if(++C,i&&i(C+1,N,a,u.slice(1),c.denseOutput&&M(t,r,s,B,m))===!1)return!1;var G;return 2===re?(G=Math.min(3,d-1),ae&&(G=2)):re<=V?(G=re,$[re-1]<$[re]*c.stepSizeFac3&&(G=re-1),$[re]<$[re-1]*c.stepSizeFac4&&(G=Math.min(re+1,d-1))):(G=re-1,re>3&&$[re-2]<$[re-1]*c.stepSizeFac3&&(G=re-2),$[re]<$[G]*c.stepSizeFac4&&(G=Math.min(re,d-1))),ae?(V=Math.min(G,re),j=D*Math.min(Math.abs(j),Math.abs(y[V])),ae=!1,!0):(j=G<=re?y[G]:re<V&&$[re]<$[re-1]*c.stepSizeFac4?y[re]*T[G+1]/T[re]:y[re]*T[G]/T[re],V=G,j=D*Math.abs(j),!0)},g=function(t){for(var n=e.dim(c.n),r=j/P[t],o=1;o<=c.n;++o)f[o]=u[o],l[o]=u[o]+r*h[o];for(var i=P[t]-1,s=P[t]/2|0,d=1;d<=i;++d){if(c.denseOutput&&d===s)for(var o=1;o<=R;++o)x[t][o]=l[m[o]];if(O(a+r*d,l,n),c.denseOutput&&Math.abs(d-s)<=2*t-1){++_;for(var o=1;o<=R;++o)A[_][o]=n[m[o]]}for(var o=1;o<=c.n;++o){var v=f[o];f[o]=l[o],l[o]=v+2*r*n[o]}if(d<=c.stabilityCheckCount&&t<=c.stabilityCheckTableLines){for(var p=0,o=1;o<=c.n;++o)p+=Math.pow(h[o]/k[o],2);for(var g=0,o=1;o<=c.n;++o)g+=Math.pow((n[o]-h[o])/k[o],2);var S=g/Math.max(c.uRound,p);if(S>4)return++z,ee=!0,j*=c.stepSizeReductionFactor,void(ae=!0)}}if(O(a+j,l,n),c.denseOutput&&s<=2*t-1){++_;for(var o=1;o<=R;++o)A[_][o]=n[m[o]]}for(var o=1;o<=c.n;++o)b[t][o]=(f[o]+l[o]+r*n[o])/2;if(z+=P[t],1!==t){for(var M,F=P[t],C=t;C>1;--C){M=Math.pow(F/P[C-1],2)-1;for(var o=1;o<=c.n;++o)b[C-1][o]=b[C][o]+(b[C][o]-b[C-1][o])/M}J=0;for(var o=1;o<=c.n;++o){var L=Math.max(Math.abs(u[o]),Math.abs(b[1][o]));k[o]=I[o]+E[o]*L,J+=Math.pow((b[1][o]-b[2][o])/k[o],2)}if(J=Math.sqrt(J/c.n),J*c.uRound>=1||t>2&&J>=Q)return ee=!0,j*=c.stepSizeReductionFactor,void(ae=!0);Q=Math.max(4*J,1);var B=1/(2*t-1),q=Math.pow(c.stepSizeFac1,B);M=Math.min(c.stepSizeFac2/q,Math.max(q,Math.pow(J/c.stepSafetyFactor1,B)/c.stepSafetyFactor2)),M=1/M,y[t]=Math.min(Math.abs(j)*M,w),$[t]=T[t]/y[t]}},S=function(e,t,a){for(var n=new Array(31),r=1;r<=e;++r){var o=t[r],i=t[2*e+r],s=t[e+r],c=t[3*e+r],u=i-o,h=-c+u,f=s-u;if(t[e+r]=u,t[2*e+r]=h,t[3*e+r]=f,!(a<0)){var l=.5*(o+i)+.125*(h+f),d=u+.25*(h-f),v=-(s-c),m=6*(f-h);if(a>=1&&(n[1]=16*(t[5*e+r]-d),a>=3&&(n[3]=16*(t[7*e+r]-m+3*n[1]),a>=5)))for(var p=5;p<=a;p+=2){var g=p*(p-1)/2,S=g*(p-2)*(p-3)*2;n[p]=16*(t[(p+4)*e+r]+g*n[p-2]-S*n[p-4])}if(n[0]=16*(t[4*e+r]-l),a>=2&&(n[2]=16*(t[6*e+r]-v+n[0]),a>=4))for(var p=4;p<=a;p+=2){var g=p*(p-1)/2,S=p*(p-1)*(p-2)*(p-3);n[p]=16*(t[e*(p+4)+r]+n[p-2]*g-n[p-4]*S)}for(var p=0;p<=a;++p)t[e*(p+4)+r]=n[p]}}},M=function(e,t,a,n,r){return function(o,i){for(var s=0,c=1;c<=R;++c)r[c]===o+1&&(s=c);if(0===s)throw new Error("no dense output available for component "+o);var u=(i-e)/t,h=1-u,f=n[s]+u*(n[R+s]+h*(n[2*R+s]*u+n[3*R+s]*h));if(a<0)return f;for(var l=u-.5,d=n[R*(a+4)+s],v=a;v>=1;--v)d=n[R*(v+3)+s]+d*l/v;return f+Math.pow(u*h,2)*d}},x=e.dim2(d,R),y=e.dim(d),b=e.dim2(d,c.n),P=e.stepSizeSequence(v,d),T=e.dim(d);T[1]=1+P[1];for(var q=2;q<=d;++q)T[q]=T[q-1]+P[q];for(var k=e.dim(c.n),q=1;q<=c.n;++q)k[q]=I[q]+E[q]+Math.abs(u[q]);var D=o-a>=0?1:-1,V=Math.max(2,Math.min(d-1,Math.floor(.6*-e.log10(E[1]+1e-40)+1.5))),j=Math.max(Math.abs(c.initialStepSize),1e-4);j=D*Math.min(j,w,Math.abs(o-a)/2);var U=e.dim(d+1),H=e.dim(2*d),N=a,_=0;if(i){if(c.denseOutput){U[1]=0;for(var q=1;q<=d;++q){var K=4*q-2;P[q]>K&&++K,U[q+1]=U[q]+K}for(var W=1;W<=2*d;++W){for(var X=.5*Math.sqrt(W/(W+4)),Y=Math.pow(1/(W+4),2),G=1;G<=W;++G)Y*=X/G;H[W]=Y}_=0}if(!1===i(C+1,N,a,u.slice(1)))return n.EarlyReturn}var J=0,Q=1e10,Z=D*w,$=e.dim(d);$[1]=0;var ee,te,ae=!1,ne=!1,re=0;!function(e){e[e.Start=0]="Start",e[e.BasicIntegrationStep=1]="BasicIntegrationStep",e[e.ConvergenceStep=2]="ConvergenceStep",e[e.HopeForConvergence=3]="HopeForConvergence",e[e.Accept=4]="Accept",e[e.Reject=5]="Reject"}(te||(te={}));var oe=te.Start;e:for(;;)switch(c.debug&&console.log("STATE",te[oe],F,N,a,j,V,re,Z),oe){case te.Start:if(ee=!1,.1*Math.abs(o-a)<=Math.abs(a)*c.uRound)break e;if(j=D*Math.min(Math.abs(j),Math.abs(o-a),w,Math.abs(Z)),(a+1.01*j-o)*D>0&&(j=o-a,ne=!0),0!==F&&c.denseOutput||(O(a,u,h),++z),0===F||ne){_=0,++F;for(var G=1;G<=V;++G){if(re=G,g(G),ee)continue e;if(G>1&&J<=1){oe=te.Accept;continue e}}oe=te.HopeForConvergence;continue}oe=te.BasicIntegrationStep;continue;case te.BasicIntegrationStep:if(_=0,++F,F>=c.maxSteps)return n.MaxStepsExceeded;re=V-1;for(var G=1;G<=re;++G)if(g(G),ee){oe=te.Start;continue e}oe=2===V||ae?te.ConvergenceStep:J<=1?te.Accept:J>Math.pow(P[V+1]*P[V]/4,2)?te.Reject:te.ConvergenceStep;continue;case te.ConvergenceStep:if(g(V),ee){oe=te.Start;continue}if(re=V,J<=1){oe=te.Accept;continue}oe=te.HopeForConvergence;continue;case te.HopeForConvergence:if(J>Math.pow(P[V+1]/2,2)){oe=te.Reject;continue}re=V+1,g(re),oe=ee?te.Start:J>1?te.Reject:te.Accept;continue;case te.Accept:if(!p(c.n))return n.EarlyReturn;oe=te.Start;continue;case te.Reject:V=Math.min(V,re,d-1),V>2&&$[V-1]<$[V]*c.stepSizeFac3&&(V-=1),++L,j=D*y[V],ae=!0,oe=te.BasicIntegrationStep}return n.Converged},q=T();return{y:u.slice(1),outcome:q,nStep:F,xEnd:o,nAccept:C,nReject:L,nEval:z}},e}();r.dim=function(e){return Array(e+1)},r.log10=function(e){return Math.log(e)/Math.LN10},a.Solver=r},{}],2:[function(e,t,a){"use strict";var n=e("odex/src/odex"),r=2*Math.PI,o=function(){function e(t){this.K=t,this.PV=e.principal_value(r)}return e.principal_value=function(e){var t=e-r;return function(a){if(t<=a&&a<e)return a;var n=a-r*Math.floor(a/r);return n<e?n:n-r}},e.prototype.generateSection=function(e,t,a){for(var n=e[0],r=e[1],o=0;o<t;++o){a(n,r);var i=r+this.K*Math.sin(n);n=this.PV(n+i),r=this.PV(i)}},e}();o.twoPi=2*Math.PI,a.StandardMap=o;var i=function(){function e(e){this.paramfn=e,this.S=new n.Solver(3),this.S.denseOutput=!0,this.S.absoluteTolerance=1e-8,this.PV=o.principal_value(Math.PI)}return e.prototype.HamiltonSysder=function(e,t,a,n,r){return function(o,i){var s=i[0],c=i[1],u=i[2],h=Math.pow(t,2),f=a*s,l=Math.sin(c),d=Math.cos(c);return[1,(Math.sin(f)*l*n*t*e*a+u)/(h*e),(-Math.pow(Math.sin(f),2)*d*l*Math.pow(n,2)*t*e*Math.pow(a,2)-Math.sin(f)*d*n*a*u-l*r*h*e)/t]}},e.prototype.LagrangeSysder=function(e,t,a,n){return function(r,o){var i=o[0],s=o[1],c=o[2],u=Math.sin(s);return[1,c,(u*Math.cos(t*i)*a*Math.pow(t,2)-u*n)/e]}},e.prototype.generateSection=function(e,t,a){var n=this,r=this.paramfn(),o=2*Math.PI/r.omega,i=1e3*o,s=this.HamiltonSysder(1,1,r.omega,r.a,9.8);this.S.solve(s,0,[0].concat(e),i,this.S.grid(o,function(e,t){return a(n.PV(t[1]),t[2])}))},e.prototype.evolve=function(e,t,a,n,r){var o=this.LagrangeSysder(1,e.omega,e.a,9.8),i=performance.now();this.S.solve(o,0,[0].concat(t),a,this.S.grid(n,r)),console.log("evolution took",(performance.now()-i).toFixed(2),"msec")},e}();a.DrivenPendulumMap=i;var s=function(){function e(e,t,a,n){var r=this;this.i=0,this.pt=function(e,t){r.context.beginPath(),r.context.arc(e,t,.01,0,2*Math.PI),r.context.fill(),r.context.closePath(),++r.i},this.canvas=document.getElementById(e),this.M=t,this.context=this.canvas.getContext("2d");var o=[a[1]-a[0],n[1]-n[0]],i=o[0],s=o[1];this.canvas.onmousedown=function(e){var t=[e.offsetX/r.context.canvas.width*i+a[0],n[1]-e.offsetY/r.context.canvas.height*s],o=t[0],c=t[1],u=performance.now();r.Explore(o,c),console.log("exploration",(performance.now()-u).toFixed(2),"msec"),r.onExplore&&r.onExplore(o,c)},this.context.scale(this.context.canvas.width/i,-this.context.canvas.height/s),this.context.translate(-a[0],-n[1]),this.context.fillStyle="rgba(23,64,170,0.5)"}return e.prototype.Explore=function(e,t){this.M.generateSection([e,t],1e3,this.pt)},e}();a.ExploreMap=s;var c=function(){function e(e){var t=this;this.amplitude=.1,this.animLogicalSize=1.3,this.frame=function(){var e=function(e){return t.amplitude*Math.cos(t.omega*e)};t.ctx.clearRect(-t.animLogicalSize,-t.animLogicalSize,2*t.animLogicalSize,2*t.animLogicalSize);var a=t.data[t.frameIndex],n=e(a[0]),r=a[1],o=t.ctx;if(o.lineWidth=.02,o.beginPath(),o.fillStyle="#000",o.arc(0,n,.05,0,2*Math.PI),o.fillStyle="#f00",o.arc(Math.sin(r),n-Math.cos(r),.1,0,2*Math.PI),o.fill(),o.fillStyle="#000",o.beginPath(),o.moveTo(0,n),o.lineTo(Math.sin(r),n-Math.cos(r)),o.stroke(),++t.frameIndex,t.frameIndex<t.data.length)window.requestAnimationFrame(t.frame);else{t.animating=!1;var i=(performance.now()-t.frameStart)/1e3;console.log("animation done",(t.data.length/i).toFixed(2),"fps")}};var a=document.getElementById(e.omegaRangeId),n=document.getElementById(e.tRangeId),r=new i(function(){return{omega:+a.value,a:t.amplitude}}),o=document.getElementById(e.animId);this.ctx=o.getContext("2d"),this.ctx.scale(o.width/(2*this.animLogicalSize),-o.height/(2*this.animLogicalSize)),this.ctx.translate(this.animLogicalSize,-this.animLogicalSize);var c=new s("p",r,[-Math.PI,Math.PI],[-10,10]);c.onExplore=function(a,n){console.log("onExplore",a,n),document.getElementById(e.theta0Id).textContent=a.toFixed(3),document.getElementById(e.thetaDot0Id).textContent=n.toFixed(3),t.initialData=[a,n]};var u=document.getElementById(e.exploreId);a.addEventListener("change",function(t){u.getContext("2d").clearRect(-Math.PI,-10,2*Math.PI,20);var a=t.target;document.getElementById(e.omegaValueId).textContent=(+a.value).toFixed(1)}),n.addEventListener("change",function(t){var a=t.target;document.getElementById(e.tValueId).textContent=a.value}),document.getElementById(e.goButtonId).addEventListener("click",function(){var e=1/60,o=+n.value,i=Math.ceil(o/e);t.data=new Array(i);var s=0;t.omega=+a.value;var c=performance.now();r.evolve({omega:t.omega,a:t.amplitude},t.initialData,o,e,function(e,a){t.data[s++]=a}),console.log("DE evolution in",(performance.now()-c).toFixed(1),"msec"),t.frameIndex=0,t.frameStart=performance.now(),t.animating||(t.animating=!0,requestAnimationFrame(t.frame))})}return e}();a.DrivenPendulumAnimation=c;var u=function(){function e(){this.S=new n.Solver(5),this.S.denseOutput=!0,this.S.absoluteTolerance=1e-8}return e.prototype.LagrangeSysder=function(e,t,a,n){var r=9.8;return function(o,i){var s=(i[0],i[1]),c=i[2],u=i[3],h=i[4],f=Math.pow(h,2),l=Math.sin(c),d=-c,v=Math.sin(s),m=Math.pow(u,2),p=d+s,g=Math.cos(p),S=Math.sin(p),M=Math.pow(S,2);return[1,u,h,(-S*g*e*n*m-S*a*n*f+g*l*r*n-v*r*t-v*r*n)/(M*e*n+e*t),(S*g*a*n*f+S*e*t*m+S*e*n*m+v*g*r*t+v*g*r*n-l*r*t-l*r*n)/(M*a*n+a*t)]}},e.prototype.evolve=function(e,t,a,n,r){this.S.solve(this.LagrangeSysder(e.l1,e.m1,e.l2,e.m2),0,[0].concat(t),a,this.S.grid(n,r))},e}(),h=function(){function e(e){var t=this;this.animLogicalSize=1.3,this.frame=function(){t.ctx.clearRect(-t.animLogicalSize,-t.animLogicalSize,2*t.animLogicalSize,2*t.animLogicalSize);var e=t.data[t.frameIndex],a=e[1],n=e[2],r=t.ctx,o=t.params,i=0,s=0,c=o.l1*Math.sin(a),u=-o.l1*Math.cos(a),h=c+o.l2*Math.sin(n),f=u-o.l2*Math.cos(n);if(r.lineWidth=.025,r.strokeStyle="#888",r.beginPath(),r.moveTo(i,s),r.lineTo(c,u),r.lineTo(h,f),r.stroke(),r.fillStyle="#f00",r.beginPath(),r.moveTo(i,s),r.arc(i,s,.05,0,2*Math.PI),r.moveTo(c,u),r.arc(c,u,Math.pow(o.m1,1/3)/7,0,2*Math.PI),r.moveTo(h,f),r.arc(h,f,Math.pow(o.m2,1/3)/7,0,2*Math.PI),r.fill(),++t.frameIndex,t.frameIndex<t.data.length)window.requestAnimationFrame(t.frame);else{t.animating=!1;var l=(performance.now()-t.frameStart)/1e3;console.log("animation done",(t.data.length/l).toFixed(2),"fps")}},this.animating=!1;var a=function(e){return 2*e*Math.PI/360},n=document.getElementById(e.theta0RangeId);n.addEventListener("change",this.valueUpdater(e.theta0ValueId));var r=document.getElementById(e.phi0RangeId);r.addEventListener("change",this.valueUpdater(e.phi0ValueId));var o=document.getElementById(e.tRangeId);o.addEventListener("change",this.valueUpdater(e.tValueId));var i=document.getElementById(e.mRangeId);i.addEventListener("change",this.valueUpdater(e.mValueId));var s=document.getElementById(e.lRangeId);s.addEventListener("change",this.valueUpdater(e.lValueId));var c=document.getElementById(e.animId);this.ctx=c.getContext("2d"),this.ctx.scale(c.width/(2*this.animLogicalSize),-c.height/(2*this.animLogicalSize)),this.ctx.translate(this.animLogicalSize,-this.animLogicalSize);var h=new u;document.getElementById(e.goButtonId).addEventListener("click",function(){var e=1/60,c=+o.value,u=Math.ceil(c/e);t.data=new Array(u);var f=0,l=performance.now();t.params={l1:+s.value,m1:+i.value,l2:1-Number(s.value),m2:1-Number(i.value)},h.evolve(t.params,[a(+n.value),a(+r.value),0,0],c,e,function(e,a){t.data[f++]=a}),console.log("evolution in",(performance.now()-l).toFixed(2),"msec"),t.frameIndex=0,t.frameStart=performance.now(),t.animating||(t.animating=!0,requestAnimationFrame(t.frame))})}return e.prototype.valueUpdater=function(e){return function(t){return document.getElementById(e).textContent=t.target.value}},e}();a.DoublePendulumAnimation=h},{"odex/src/odex":1}]},{},[2])(2)});