!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.s=t()}}(function(){return function t(e,a,n){function r(o,s){if(!a[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=a[o]={exports:{}};e[o][0].call(h.exports,function(t){var a=e[o][1][t];return r(a?a:t)},h,h.exports,t,e,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,a){"use strict";var n;!function(t){t[t.Converged=0]="Converged",t[t.MaxStepsExceeded=1]="MaxStepsExceeded",t[t.EarlyReturn=2]="EarlyReturn"}(n=a.Outcome||(a.Outcome={}));var r=function(){function t(t){this.n=t,this.uRound=2.3e-16,this.maxSteps=1e4,this.initialStepSize=1e-4,this.maxStepSize=0,this.maxExtrapolationColumns=9,this.stepSizeSequence=0,this.stabilityCheckCount=1,this.stabilityCheckTableLines=2,this.denseOutput=!1,this.denseOutputErrorEstimator=!0,this.denseComponents=void 0,this.interpolationFormulaDegree=4,this.stepSizeReductionFactor=.5,this.stepSizeFac1=.02,this.stepSizeFac2=4,this.stepSizeFac3=.8,this.stepSizeFac4=.9,this.stepSafetyFactor1=.65,this.stepSafetyFactor2=.94,this.relativeTolerance=1e-5,this.absoluteTolerance=1e-5,this.debug=!1}return t.prototype.grid=function(t,e){var a=this.denseComponents;if(!a){a=[];for(var n=0;n<this.n;++n)a.push(n)}var r;return function(n,i,o,s,c){if(1===n)return e(o,s),void(r=o+t);for(;r<=o;){for(var u=[],h=0,l=a;h<l.length;h++){var f=l[h];u.push(c(f,r))}e(r,u),r+=t}}},t.dim2=function(e,a){for(var n=new Array(e+1),r=1;r<=e;++r)n[r]=t.dim(a);return n},t.stepSizeSequence=function(t,e){var a=new Array(e+1);switch(a[0]=0,t){case 1:for(var n=1;n<=e;++n)a[n]=2*n;break;case 2:a[1]=2;for(var n=2;n<=e;++n)a[n]=4*n-4;break;case 3:a[1]=2,a[2]=4,a[3]=6;for(var n=4;n<=e;++n)a[n]=2*a[n-2];break;case 4:for(var n=1;n<=e;++n)a[n]=4*n-2;break;case 5:for(var n=1;n<=e;++n)a[n]=4*n;break;default:throw new Error("invalid stepSizeSequence selected")}return a},t.prototype.solve=function(e,a,r,i,o){function s(t,e){var a=[0];if(Array.isArray(t))return a.concat(t);for(var n=0;n<e;++n)a.push(t);return a}var c=this,u=[0].concat(r),h=t.dim(this.n),l=t.dim(this.n),f=t.dim(this.n);if(this.maxSteps<=0)throw new Error("maxSteps must be positive");var d=this.maxExtrapolationColumns;if(d<=2)throw new Error("maxExtrapolationColumns must be > 2");var v=this.stepSizeSequence||(this.denseOutput?4:1);if(v<=3&&this.denseOutput)throw new Error("stepSizeSequence incompatible with denseOutput");if(this.denseOutput&&!o)throw new Error("denseOutput requires a solution observer function");if(this.interpolationFormulaDegree<=0||this.interpolationFormulaDegree>=7)throw new Error("bad interpolationFormulaDegree");var m=[0],p=0;if(this.denseOutput)if(this.denseComponents)for(var g=0,S=this.denseComponents;g<S.length;g++){var M=S[g];if(M<0||M>this.n)throw new Error("bad dense component: "+M);m.push(M+1),++p}else{for(var x=1;x<=this.n;++x)m.push(x);p=this.n}if(this.uRound<=1e-35||this.uRound>1)throw new Error("suspicious value of uRound");var w=Math.abs(this.maxStepSize||i-a),I=2*d*d+d,y=s(this.absoluteTolerance,this.n),E=s(this.relativeTolerance,this.n),b=[0,0,0,0],F=b[0],z=b[1],L=b[2],C=b[3],P=Math.max(1,p),R=Math.max(1,(2*d+5)*p),B=t.dim(R),A=t.dim2(I,P),O=function(t,a,n){for(var r=e(t,a.slice(1)),i=0;i<r.length;++i)n[i+1]=r[i]},T=function(){var e,r,s,p=function(t){if(N=a,a+=U,c.denseOutput){s=2*rt-c.interpolationFormulaDegree+1;for(var n=1;n<=P;++n)B[n]=u[m[n]];e=N,r=U;for(var n=1;n<=P;++n)B[P+n]=U*h[m[n]];for(var i=2*P,n=1;n<=P;++n)B[i+n]=b[1][m[n]];for(var p=2;p<=rt;++p)for(var g=R[p],w=p;w>=2;--w)for(var y=Math.pow(g/R[w-1],2)-1,n=1;n<=P;++n)x[w-1][n]=x[w][n]+(x[w][n]-x[w-1][n])/y;for(var E=4*P,n=1;n<=P;++n)B[E+n]=x[1][n];for(var n=1;n<=t;++n)l[n]=b[1][n];O(a,l,f),E=3*P;for(var n=1;n<=P;++n)B[E+n]=f[m[n]]*U;for(var F=1;F<=s;++F){for(var z=(F+1)/2|0,V=z;V<=rt;++V){var K=Math.pow(R[V]/2,F-1);_=j[V+1]-2*V+F;for(var n=1;n<=P;++n)x[V][n]=A[_][n]*K}for(var p=z+1;p<=rt;++p)for(var g=R[p],w=p;w>=z+1;--w)for(var y=Math.pow(g/R[w-1],2)-1,n=1;n<=P;++n)x[w-1][n]=x[w][n]+(x[w][n]-x[w-1][n])/y;E=(F+4)*P;for(var n=1;n<=P;++n)B[E+n]=x[z][n]*U;if(F!==s){for(var V=(F+2)/2|0;V<=rt;++V){var W=j[V+1],X=j[V]+F+1;1===F&&4===v&&(X+=2);var w=void 0;for(w=W;w>=X;w-=2)for(var n=1;n<=P;++n)A[w][n]-=A[w-2][n];if(1===F&&4===v){w=X-2;for(var n=1;n<=P;++n)A[w][n]-=h[m[n]]}}for(var V=(F+2)/2|0;V<=rt;++V)for(var W=j[V+1]-1,X=j[V]+F+2,w=W;w>=X;w-=2)for(var n=1;n<=P;++n)A[w][n]-=A[w-2][n]}}if(S(P,B,s),c.denseOutputErrorEstimator&&s>=1){for(var Y=0,n=1;n<=P;++n)Y+=Math.pow(B[(s+4)*P+n]/q[m[n]],2);if(Y=Math.sqrt(Y/P)*H[s],Q=U/Math.max(Math.pow(Y,1/(s+4)),.01),Y>10)return U=Q,a=N,++C,at=!0,!0}for(var n=1;n<=t;++n)h[n]=f[n]}for(var n=1;n<=t;++n)u[n]=b[1][n];if(++L,o&&o(L+1,N,a,u.slice(1),c.denseOutput&&M(e,r,s,B,m))===!1)return!1;var $;return 2===rt?($=Math.min(3,d-1),at&&($=2)):rt<=D?($=rt,Z[rt-1]<Z[rt]*c.stepSizeFac3&&($=rt-1),Z[rt]<Z[rt-1]*c.stepSizeFac4&&($=Math.min(rt+1,d-1))):($=rt-1,rt>3&&Z[rt-2]<Z[rt-1]*c.stepSizeFac3&&($=rt-2),Z[rt]<Z[$]*c.stepSizeFac4&&($=Math.min(rt,d-1))),at?(D=Math.min($,rt),U=k*Math.min(Math.abs(U),Math.abs(I[D])),at=!1,!0):(U=$<=rt?I[$]:rt<D&&Z[rt]<Z[rt-1]*c.stepSizeFac4?I[rt]*T[$+1]/T[rt]:I[rt]*T[$]/T[rt],D=$,U=k*Math.abs(U),!0)},g=function(e){for(var n=t.dim(c.n),r=U/R[e],i=1;i<=c.n;++i)l[i]=u[i],f[i]=u[i]+r*h[i];for(var o=R[e]-1,s=R[e]/2|0,d=1;d<=o;++d){if(c.denseOutput&&d===s)for(var i=1;i<=P;++i)x[e][i]=f[m[i]];if(O(a+r*d,f,n),c.denseOutput&&Math.abs(d-s)<=2*e-1){++_;for(var i=1;i<=P;++i)A[_][i]=n[m[i]]}for(var i=1;i<=c.n;++i){var v=l[i];l[i]=f[i],f[i]=v+2*r*n[i]}if(d<=c.stabilityCheckCount&&e<=c.stabilityCheckTableLines){for(var p=0,i=1;i<=c.n;++i)p+=Math.pow(h[i]/q[i],2);for(var g=0,i=1;i<=c.n;++i)g+=Math.pow((n[i]-h[i])/q[i],2);var S=g/Math.max(c.uRound,p);if(S>4)return++F,tt=!0,U*=c.stepSizeReductionFactor,void(at=!0)}}if(O(a+U,f,n),c.denseOutput&&s<=2*e-1){++_;for(var i=1;i<=P;++i)A[_][i]=n[m[i]]}for(var i=1;i<=c.n;++i)b[e][i]=(l[i]+f[i]+r*n[i])/2;if(F+=R[e],1!==e){for(var M,z=R[e],L=e;L>1;--L){M=Math.pow(z/R[L-1],2)-1;for(var i=1;i<=c.n;++i)b[L-1][i]=b[L][i]+(b[L][i]-b[L-1][i])/M}G=0;for(var i=1;i<=c.n;++i){var C=Math.max(Math.abs(u[i]),Math.abs(b[1][i]));q[i]=y[i]+E[i]*C,G+=Math.pow((b[1][i]-b[2][i])/q[i],2)}if(G=Math.sqrt(G/c.n),G*c.uRound>=1||e>2&&G>=J)return tt=!0,U*=c.stepSizeReductionFactor,void(at=!0);J=Math.max(4*G,1);var B=1/(2*e-1),V=Math.pow(c.stepSizeFac1,B);M=Math.min(c.stepSizeFac2/V,Math.max(V,Math.pow(G/c.stepSafetyFactor1,B)/c.stepSafetyFactor2)),M=1/M,I[e]=Math.min(Math.abs(U)*M,w),Z[e]=T[e]/I[e]}},S=function(t,e,a){for(var n=new Array(31),r=1;r<=t;++r){var i=e[r],o=e[2*t+r],s=e[t+r],c=e[3*t+r],u=o-i,h=-c+u,l=s-u;if(e[t+r]=u,e[2*t+r]=h,e[3*t+r]=l,!(a<0)){var f=.5*(i+o)+.125*(h+l),d=u+.25*(h-l),v=-(s-c),m=6*(l-h);if(a>=1&&(n[1]=16*(e[5*t+r]-d),a>=3&&(n[3]=16*(e[7*t+r]-m+3*n[1]),a>=5)))for(var p=5;p<=a;p+=2){var g=p*(p-1)/2,S=g*(p-2)*(p-3)*2;n[p]=16*(e[(p+4)*t+r]+g*n[p-2]-S*n[p-4])}if(n[0]=16*(e[4*t+r]-f),a>=2&&(n[2]=16*(e[6*t+r]-v+n[0]),a>=4))for(var p=4;p<=a;p+=2){var g=p*(p-1)/2,S=p*(p-1)*(p-2)*(p-3);n[p]=16*(e[t*(p+4)+r]+n[p-2]*g-n[p-4]*S)}for(var p=0;p<=a;++p)e[t*(p+4)+r]=n[p]}}},M=function(t,e,a,n,r){return function(i,o){for(var s=0,c=1;c<=P;++c)r[c]===i+1&&(s=c);if(0===s)throw new Error("no dense output available for component "+i);var u=(o-t)/e,h=1-u,l=n[s]+u*(n[P+s]+h*(n[2*P+s]*u+n[3*P+s]*h));if(a<0)return l;for(var f=u-.5,d=n[P*(a+4)+s],v=a;v>=1;--v)d=n[P*(v+3)+s]+d*f/v;return l+Math.pow(u*h,2)*d}},x=t.dim2(d,P),I=t.dim(d),b=t.dim2(d,c.n),R=t.stepSizeSequence(v,d),T=t.dim(d);T[1]=1+R[1];for(var V=2;V<=d;++V)T[V]=T[V-1]+R[V];for(var q=t.dim(c.n),V=1;V<=c.n;++V)q[V]=y[V]+E[V]+Math.abs(u[V]);var k=i-a>=0?1:-1,D=Math.max(2,Math.min(d-1,Math.floor(.6*-t.log10(E[1]+1e-40)+1.5))),U=Math.max(Math.abs(c.initialStepSize),1e-4);U=k*Math.min(U,w,Math.abs(i-a)/2);var j=t.dim(d+1),H=t.dim(2*d),N=a,_=0;if(o){if(c.denseOutput){j[1]=0;for(var V=1;V<=d;++V){var K=4*V-2;R[V]>K&&++K,j[V+1]=j[V]+K}for(var W=1;W<=2*d;++W){for(var X=.5*Math.sqrt(W/(W+4)),Y=Math.pow(1/(W+4),2),$=1;$<=W;++$)Y*=X/$;H[W]=Y}_=0}if(!1===o(L+1,N,a,u.slice(1)))return n.EarlyReturn}var G=0,J=1e10,Q=k*w,Z=t.dim(d);Z[1]=0;var tt,et,at=!1,nt=!1,rt=0;!function(t){t[t.Start=0]="Start",t[t.BasicIntegrationStep=1]="BasicIntegrationStep",t[t.ConvergenceStep=2]="ConvergenceStep",t[t.HopeForConvergence=3]="HopeForConvergence",t[t.Accept=4]="Accept",t[t.Reject=5]="Reject"}(et||(et={}));var it=et.Start;t:for(;;)switch(c.debug&&console.log("STATE",et[it],z,N,a,U,D,rt,Q),it){case et.Start:if(tt=!1,.1*Math.abs(i-a)<=Math.abs(a)*c.uRound)break t;if(U=k*Math.min(Math.abs(U),Math.abs(i-a),w,Math.abs(Q)),(a+1.01*U-i)*k>0&&(U=i-a,nt=!0),0!==z&&c.denseOutput||(O(a,u,h),++F),0===z||nt){_=0,++z;for(var $=1;$<=D;++$){if(rt=$,g($),tt)continue t;if($>1&&G<=1){it=et.Accept;continue t}}it=et.HopeForConvergence;continue}it=et.BasicIntegrationStep;continue;case et.BasicIntegrationStep:if(_=0,++z,z>=c.maxSteps)return n.MaxStepsExceeded;rt=D-1;for(var $=1;$<=rt;++$)if(g($),tt){it=et.Start;continue t}it=2===D||at?et.ConvergenceStep:G<=1?et.Accept:G>Math.pow(R[D+1]*R[D]/4,2)?et.Reject:et.ConvergenceStep;continue;case et.ConvergenceStep:if(g(D),tt){it=et.Start;continue}if(rt=D,G<=1){it=et.Accept;continue}it=et.HopeForConvergence;continue;case et.HopeForConvergence:if(G>Math.pow(R[D+1]/2,2)){it=et.Reject;continue}rt=D+1,g(rt),it=tt?et.Start:G>1?et.Reject:et.Accept;continue;case et.Accept:if(!p(c.n))return n.EarlyReturn;it=et.Start;continue;case et.Reject:D=Math.min(D,rt,d-1),D>2&&Z[D-1]<Z[D]*c.stepSizeFac3&&(D-=1),++C,U=k*I[D],at=!0,it=et.BasicIntegrationStep}return n.Converged},V=T();return{y:u.slice(1),outcome:V,nStep:z,xEnd:i,nAccept:L,nReject:C,nEval:F}},t}();r.dim=function(t){return Array(t+1)},r.log10=function(t){return Math.log(t)/Math.LN10},a.Solver=r},{}],2:[function(t,e,a){"use strict";var n=t("odex/src/odex"),r=2*Math.PI,i=function(){function t(e){this.K=e,this.PV=t.principal_value(r)}return t.principal_value=function(t){var e=t-r;return function(a){if(e<=a&&a<t)return a;var n=a-r*Math.floor(a/r);return n<t?n:n-r}},t.prototype.generateSection=function(t,e,a){for(var n=t[0],r=t[1],i=0;i<e;++i){a(n,r);var o=r+this.K*Math.sin(n);n=this.PV(n+o),r=this.PV(o)}},t}();i.twoPi=2*Math.PI,a.StandardMap=i;var o=function(){function t(t){this.paramfn=t,this.S=new n.Solver(3),this.S.denseOutput=!0,this.S.absoluteTolerance=1e-8,this.PV=i.principal_value(Math.PI)}return t.prototype.HamiltonSysder=function(t,e,a,n,r){return function(i,o){var s=o[0],c=o[1],u=o[2],h=Math.pow(e,2),l=a*s,f=Math.sin(c),d=Math.cos(c),v=Math.sin(l);return[1,(n*e*t*a*v*f+u)/(h*t),(-Math.pow(n,2)*e*t*Math.pow(a,2)*Math.pow(v,2)*d*f-n*a*u*v*d-r*h*t*f)/e]}},t.prototype.LagrangeSysder=function(t,e,a,n){return function(r,i){var o=i[0],s=i[1],c=i[2],u=Math.sin(s);return[1,c,(a*Math.pow(e,2)*u*Math.cos(e*o)-n*u)/t]}},t.prototype.generateSection=function(t,e,a){var n=this,r=this.paramfn(),i=2*Math.PI/r.omega,o=1e3*i,s=this.HamiltonSysder(1,1,r.omega,r.a,9.8);this.S.solve(s,0,[0].concat(t),o,this.S.grid(i,function(t,e){return a(n.PV(e[1]),e[2])}))},t.prototype.evolve=function(t,e,a,n,r){var i=this.LagrangeSysder(1,t.omega,t.a,9.8),o=performance.now();this.S.solve(i,0,[0].concat(e),a,this.S.grid(n,r)),console.log("evolution took",(performance.now()-o).toFixed(2),"msec")},t}();a.DrivenPendulumMap=o;var s=function(){function t(t,e,a,n){var r=this;this.i=0,this.pt=function(t,e){r.context.beginPath(),r.context.arc(t,e,.01,0,2*Math.PI),r.context.fill(),r.context.closePath(),++r.i},this.canvas=document.getElementById(t),this.M=e,this.context=this.canvas.getContext("2d");var i=[a[1]-a[0],n[1]-n[0]],o=i[0],s=i[1];this.canvas.onmousedown=function(t){var e=[t.offsetX/r.context.canvas.width*o+a[0],n[1]-t.offsetY/r.context.canvas.height*s],i=e[0],c=e[1],u=performance.now();r.Explore(i,c),console.log("exploration",(performance.now()-u).toFixed(2),"msec"),r.onExplore&&r.onExplore(i,c)},this.context.scale(this.context.canvas.width/o,-this.context.canvas.height/s),this.context.translate(-a[0],-n[1]),this.context.fillStyle="rgba(23,64,170,0.5)"}return t.prototype.Explore=function(t,e){this.M.generateSection([t,e],1e3,this.pt)},t}();a.ExploreMap=s;var c=function(){function t(t){var e=this;this.amplitude=.1,this.animLogicalSize=1.3,this.timestring=function(t){var e=t.toFixed(2);return e.match(/\.[0-9]$/)&&(e+="0"),"t: "+e+" s"},this.frame=function(){var t=function(t){return e.amplitude*Math.cos(e.omega*t)};e.ctx.clearRect(-e.animLogicalSize,-e.animLogicalSize,2*e.animLogicalSize,2*e.animLogicalSize);var a=e.data[e.frameIndex],n=t(a[0]),r=a[1],i=e.ctx;if(i.lineWidth=.02,i.fillStyle="#000",i.beginPath(),i.moveTo(0,n),i.lineTo(Math.sin(r),n-Math.cos(r)),i.stroke(),i.beginPath(),i.fillStyle="#000",i.arc(0,n,.05,0,2*Math.PI),i.fillStyle="#f00",i.arc(Math.sin(r),n-Math.cos(r),.1,0,2*Math.PI),i.fill(),i.save(),i.scale(.01,-.01),i.font="10pt sans-serif3",i.fillStyle="#bbb",i.fillText(e.timestring(a[0]),-115,115),i.restore(),++e.frameIndex,e.frameIndex<e.data.length)window.requestAnimationFrame(e.frame);else{e.animating=!1;var o=(performance.now()-e.frameStart)/1e3;console.log("animation done",(e.data.length/o).toFixed(2),"fps")}};var a=document.getElementById(t.fRangeId),n=function(){return 2*+a.value*Math.PI},r=document.getElementById(t.tRangeId),i=new o(function(){return{omega:n(),a:e.amplitude}}),c=document.getElementById(t.animId);this.ctx=c.getContext("2d"),this.ctx.scale(c.width/(2*this.animLogicalSize),-c.height/(2*this.animLogicalSize)),this.ctx.translate(this.animLogicalSize,-this.animLogicalSize);var u=new s("p",i,[-Math.PI,Math.PI],[-10,10]),h=document.getElementById(t.goButtonId);u.onExplore=function(a,n){console.log("onExplore",a,n),document.getElementById(t.theta0Id).textContent=a.toFixed(3),document.getElementById(t.thetaDot0Id).textContent=n.toFixed(3),e.initialData=[a,n],h.removeAttribute("disabled")};var l=document.getElementById(t.exploreId);a.addEventListener("change",function(e){l.getContext("2d").clearRect(-Math.PI,-10,2*Math.PI,20);var a=e.target;document.getElementById(t.fValueId).textContent=(+a.value).toFixed(1)}),document.getElementById(t.fValueId).textContent=a.value,r.addEventListener("change",function(e){var a=e.target;document.getElementById(t.tValueId).textContent=a.value}),document.getElementById(t.tValueId).textContent=r.value,h.setAttribute("disabled","disabled"),h.addEventListener("click",function(){var t=1/60,a=+r.value,o=Math.ceil(a/t);e.data=new Array(o);var s=0;e.omega=n();var c=performance.now();i.evolve({omega:e.omega,a:e.amplitude},e.initialData,a,t,function(t,a){e.data[s++]=a}),console.log("DE evolution in",(performance.now()-c).toFixed(1),"msec"),e.frameIndex=0,e.frameStart=performance.now(),e.animating||(e.animating=!0,requestAnimationFrame(e.frame))})}return t}();a.DrivenPendulumAnimation=c;var u=function(){function t(){this.S=new n.Solver(5),this.S.denseOutput=!0,this.S.absoluteTolerance=1e-8}return t.prototype.LagrangeSysder=function(t,e,a,n){var r=9.8;return function(i,o){var s=(o[0],o[1]),c=o[2],u=o[3],h=o[4],l=Math.pow(h,2),f=Math.sin(c),d=-c,v=Math.sin(s),m=Math.pow(u,2),p=d+s,g=Math.cos(p),S=Math.sin(p),M=Math.pow(S,2);return[1,u,h,(-t*n*m*S*g-a*n*l*S+r*n*g*f-r*e*v-r*n*v)/(t*n*M+t*e),(a*n*l*S*g+t*e*m*S+t*n*m*S+r*e*v*g+r*n*v*g-r*e*f-r*n*f)/(a*n*M+a*e)]}},t.prototype.evolve=function(t,e,a,n,r){this.S.solve(this.LagrangeSysder(t.l1,t.m1,t.l2,t.m2),0,[0].concat(e),a,this.S.grid(n,r))},t}(),h=function(){function t(t){var e=this;this.animLogicalSize=1.3,this.frame=function(){e.ctx.clearRect(-e.animLogicalSize,-e.animLogicalSize,2*e.animLogicalSize,2*e.animLogicalSize);var t=e.data[e.frameIndex],a=t[1],n=t[2],r=e.ctx,i=e.params,o=0,s=0,c=i.l1*Math.sin(a),u=-i.l1*Math.cos(a),h=c+i.l2*Math.sin(n),l=u-i.l2*Math.cos(n);if(r.lineWidth=.025,r.strokeStyle="#888",r.beginPath(),r.moveTo(o,s),r.lineTo(c,u),r.lineTo(h,l),r.stroke(),r.fillStyle="#f00",r.beginPath(),r.moveTo(o,s),r.arc(o,s,.05,0,2*Math.PI),r.moveTo(c,u),r.arc(c,u,Math.pow(i.m1,1/3)/7,0,2*Math.PI),r.moveTo(h,l),r.arc(h,l,Math.pow(i.m2,1/3)/7,0,2*Math.PI),r.fill(),++e.frameIndex,e.frameIndex<e.data.length)window.requestAnimationFrame(e.frame);else{e.animating=!1;var f=(performance.now()-e.frameStart)/1e3;console.log("animation done",(e.data.length/f).toFixed(2),"fps")}},this.animating=!1;var a=function(t){return 2*t*Math.PI/360},n=document.getElementById(t.theta0RangeId);n.addEventListener("change",this.valueUpdater(t.theta0ValueId)),n.addEventListener("input",this.valueUpdater(t.theta0ValueId));var r=document.getElementById(t.phi0RangeId);r.addEventListener("change",this.valueUpdater(t.phi0ValueId)),r.addEventListener("input",this.valueUpdater(t.phi0ValueId));var i=document.getElementById(t.tRangeId);i.addEventListener("change",this.valueUpdater(t.tValueId)),i.addEventListener("input",this.valueUpdater(t.tValueId));var o=document.getElementById(t.mRangeId);o.addEventListener("change",this.valueUpdater(t.mValueId)),o.addEventListener("input",this.valueUpdater(t.mValueId));var s=document.getElementById(t.lRangeId);s.addEventListener("change",this.valueUpdater(t.lValueId)),s.addEventListener("input",this.valueUpdater(t.lValueId));var c=document.getElementById(t.animId);this.ctx=c.getContext("2d"),this.ctx.scale(c.width/(2*this.animLogicalSize),-c.height/(2*this.animLogicalSize)),this.ctx.translate(this.animLogicalSize,-this.animLogicalSize);var h=new u;document.getElementById(t.goButtonId).addEventListener("click",function(){var t=1/60,c=+i.value,u=Math.ceil(c/t);e.data=new Array(u);var l=0,f=performance.now();e.params={l1:+s.value,m1:+o.value,l2:1-Number(s.value),m2:1-Number(o.value)},h.evolve(e.params,[a(+n.value),a(+r.value),0,0],c,t,function(t,a){e.data[l++]=a}),console.log("evolution in",(performance.now()-f).toFixed(2),"msec "),e.frameIndex=0,e.frameStart=performance.now(),e.animating||(e.animating=!0,requestAnimationFrame(e.frame))})}return t.prototype.valueUpdater=function(t){return function(e){return document.getElementById(t).textContent=e.target.value}},t}();a.DoublePendulumAnimation=h},{"odex/src/odex":1}]},{},[2])(2)});