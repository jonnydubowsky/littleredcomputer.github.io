!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.s=t()}}(function(){return function t(e,r,n){function a(i,s){if(!r[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[i]={exports:{}};e[i][0].call(f.exports,function(t){var r=e[i][1][t];return a(r?r:t)},f,f.exports,t,e,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(t,e,r){"use strict";var n=t("../../odex/src/odex"),a=2*Math.PI,o=function(){function t(e){this.evolve=function(t,e,r){for(var n=t[0],a=t[1],o=0;o<e;++o){r(n,a);var i=a+this.K*Math.sin(n);n=this.PV(n+i),a=this.PV(i)}},this.K=e,this.PV=t.principal_value(a)}return t.principal_value=function(t){var e=t-a;return function(r){if(e<=r&&r<t)return r;var n=r-a*Math.floor(r/a);return n<t?n:n-a}},t}();o.twoPi=2*Math.PI,r.StandardMap=o;var i=function(){function t(){this.S=new n.Solver(3),this.S.denseOutput=!0;var e=1,r=9.8,a=Math.sqrt(r/e),i=2*a;this.T=2*Math.PI/i;var s=.1;this.d=t.F(1,e,s,i,r),this.PV=o.principal_value(Math.PI)}return t.prototype.evolve=function(t,e,r){var n=this;this.S.solve(this.d,0,[0].concat(t),1e3*this.T,this.S.grid(this.T,function(t,e){r(n.PV(e[1]),e[2])}))},t}();i.F=function(t,e,r,n,a){return function(o,i){var s=i[0],u=i[1],c=i[2],f=Math.pow(e,2),h=n*s,v=Math.sin(u),p=Math.cos(u);return[1,(Math.sin(h)*v*r*e*t*n+c)/f*t,(-Math.pow(Math.sin(h),2)*v*p*Math.pow(r,2)*e*t*Math.pow(n,2)-Math.sin(h)*p*r*n*c-v*a*f*t)/e]}},r.DrivenPendulumMap=i;var s=function(){function t(t,e,r,n){var a=this;this.i=0,this.pt=function(t,e){a.context.beginPath(),a.context.arc(t,e,.01,0,2*Math.PI),a.context.fill(),a.context.closePath(),++a.i},this.canvas=document.getElementById(t),this.M=e,this.context=this.canvas.getContext("2d");var o=[r[1]-r[0],n[1]-n[0]],i=o[0],s=o[1];this.canvas.onmousedown=function(t){var e=[t.offsetX/a.context.canvas.width*i+r[0],n[1]-t.offsetY/a.context.canvas.height*s],o=e[0],u=e[1];a.Explore(o,u)},this.context.scale(this.context.canvas.width/i,-this.context.canvas.height/s),this.context.translate(-r[0],-n[1]),this.context.fillStyle="rgba(23,64,170,0.3)"}return t.prototype.Explore=function(t,e){this.M.evolve([t,e],1e3,this.pt)},t}();r.ExploreMap=s},{"../../odex/src/odex":2}],2:[function(t,e,r){"use strict";var n;!function(t){t[t.Converged=0]="Converged",t[t.MaxStepsExceeded=1]="MaxStepsExceeded",t[t.EarlyReturn=2]="EarlyReturn"}(n=r.Outcome||(r.Outcome={}));var a=function(){function t(t){this.n=t,this.uRound=2.3e-16,this.maxSteps=1e4,this.initialStepSize=1e-4,this.maxStepSize=0,this.maxExtrapolationColumns=9,this.stepSizeSequence=0,this.stabilityCheckCount=1,this.stabilityCheckTableLines=2,this.denseOutput=!1,this.denseOutputErrorEstimator=!0,this.denseComponents=void 0,this.interpolationFormulaDegree=4,this.stepSizeReductionFactor=.5,this.stepSizeFac1=.02,this.stepSizeFac2=4,this.stepSizeFac3=.8,this.stepSizeFac4=.9,this.stepSafetyFactor1=.65,this.stepSafetyFactor2=.94,this.relativeTolerance=1e-5,this.absoluteTolerance=1e-5,this.debug=!1}return t.prototype.grid=function(t,e){var r=this.denseComponents;if(!r){r=[];for(var n=0;n<this.n;++n)r.push(n)}var a;return function(n,o,i,s,u){if(1===n)return e(i,s),void(a=i+t);for(;a<=i;){for(var c=[],f=0,h=r;f<h.length;f++){var v=h[f];c.push(u(v,a))}e(a,c),a+=t}}},t.dim2=function(e,r){for(var n=new Array(e+1),a=1;a<=e;++a)n[a]=t.dim(r);return n},t.stepSizeSequence=function(t,e){var r=new Array(e+1);switch(r[0]=0,t){case 1:for(var n=1;n<=e;++n)r[n]=2*n;break;case 2:r[1]=2;for(var n=2;n<=e;++n)r[n]=4*n-4;break;case 3:r[1]=2,r[2]=4,r[3]=6;for(var n=4;n<=e;++n)r[n]=2*r[n-2];break;case 4:for(var n=1;n<=e;++n)r[n]=4*n-2;break;case 5:for(var n=1;n<=e;++n)r[n]=4*n;break;default:throw new Error("invalid stepSizeSequence selected")}return r},t.prototype.solve=function(e,r,a,o,i){function s(t,e){var r=[0];if(Array.isArray(t))return r.concat(t);for(var n=0;n<e;++n)r.push(t);return r}var u=this,c=[0].concat(a),f=t.dim(this.n),h=t.dim(this.n),v=t.dim(this.n);if(this.maxSteps<=0)throw new Error("maxSteps must be positive");var p=this.maxExtrapolationColumns;if(p<=2)throw new Error("maxExtrapolationColumns must be > 2");var d=this.stepSizeSequence||(this.denseOutput?4:1);if(d<=3&&this.denseOutput)throw new Error("stepSizeSequence incompatible with denseOutput");if(this.denseOutput&&!i)throw new Error("denseOutput requires a solution observer function");if(this.interpolationFormulaDegree<=0||this.interpolationFormulaDegree>=7)throw new Error("bad interpolationFormulaDegree");var l=[0],M=0;if(this.denseOutput)if(this.denseComponents)for(var m=0,S=this.denseComponents;m<S.length;m++){var w=S[m];if(w<0||w>this.n)throw new Error("bad dense component: "+w);l.push(w+1),++M}else{for(var x=1;x<=this.n;++x)l.push(x);M=this.n}if(this.uRound<=1e-35||this.uRound>1)throw new Error("suspicious value of uRound");var b=Math.abs(this.maxStepSize||o-r),g=2*p*p+p,y=s(this.absoluteTolerance,this.n),E=s(this.relativeTolerance,this.n),F=[0,0,0,0],C=F[0],z=F[1],O=F[2],R=F[3],q=Math.max(1,M),A=Math.max(1,(2*p+5)*M),P=t.dim(A),T=t.dim2(g,q),I=function(t,r,n){for(var a=e(t,r.slice(1)),o=0;o<a.length;++o)n[o+1]=a[o]},k=function(){var e,a,s,M=function(t){if(N=r,r+=V,u.denseOutput){s=2*at-u.interpolationFormulaDegree+1;for(var n=1;n<=q;++n)P[n]=c[l[n]];e=N,a=V;for(var n=1;n<=q;++n)P[q+n]=V*f[l[n]];for(var o=2*q,n=1;n<=q;++n)P[o+n]=F[1][l[n]];for(var M=2;M<=at;++M)for(var m=A[M],b=M;b>=2;--b)for(var y=Math.pow(m/A[b-1],2)-1,n=1;n<=q;++n)x[b-1][n]=x[b][n]+(x[b][n]-x[b-1][n])/y;for(var E=4*q,n=1;n<=q;++n)P[E+n]=x[1][n];for(var n=1;n<=t;++n)h[n]=F[1][n];I(r,h,v),E=3*q;for(var n=1;n<=q;++n)P[E+n]=v[l[n]]*V;for(var C=1;C<=s;++C){for(var z=(C+1)/2|0,j=z;j<=at;++j){var U=Math.pow(A[j]/2,C-1);K=_[j+1]-2*j+C;for(var n=1;n<=q;++n)x[j][n]=T[K][n]*U}for(var M=z+1;M<=at;++M)for(var m=A[M],b=M;b>=z+1;--b)for(var y=Math.pow(m/A[b-1],2)-1,n=1;n<=q;++n)x[b-1][n]=x[b][n]+(x[b][n]-x[b-1][n])/y;E=(C+4)*q;for(var n=1;n<=q;++n)P[E+n]=x[z][n]*V;if(C!==s){for(var j=(C+2)/2|0;j<=at;++j){var X=_[j+1],Y=_[j]+C+1;1===C&&4===d&&(Y+=2);var b=void 0;for(b=X;b>=Y;b-=2)for(var n=1;n<=q;++n)T[b][n]-=T[b-2][n];if(1===C&&4===d){b=Y-2;for(var n=1;n<=q;++n)T[b][n]-=f[l[n]]}}for(var j=(C+2)/2|0;j<=at;++j)for(var X=_[j+1]-1,Y=_[j]+C+2,b=X;b>=Y;b-=2)for(var n=1;n<=q;++n)T[b][n]-=T[b-2][n]}}if(S(q,P,s),u.denseOutputErrorEstimator&&s>=1){for(var G=0,n=1;n<=q;++n)G+=Math.pow(P[(s+4)*q+n]/D[l[n]],2);if(G=Math.sqrt(G/q)*L[s],Z=V/Math.max(Math.pow(G,1/(s+4)),.01),G>10)return V=Z,r=N,++R,rt=!0,!0}for(var n=1;n<=t;++n)f[n]=v[n]}for(var n=1;n<=t;++n)c[n]=F[1][n];if(++O,i&&i(O+1,N,r,c.slice(1),u.denseOutput&&w(e,a,s,P,l))===!1)return!1;var J;return 2===at?(J=Math.min(3,p-1),rt&&(J=2)):at<=H?(J=at,$[at-1]<$[at]*u.stepSizeFac3&&(J=at-1),$[at]<$[at-1]*u.stepSizeFac4&&(J=Math.min(at+1,p-1))):(J=at-1,at>3&&$[at-2]<$[at-1]*u.stepSizeFac3&&(J=at-2),$[at]<$[J]*u.stepSizeFac4&&(J=Math.min(at,p-1))),rt?(H=Math.min(J,at),V=B*Math.min(Math.abs(V),Math.abs(g[H])),rt=!1,!0):(V=J<=at?g[J]:at<H&&$[at]<$[at-1]*u.stepSizeFac4?g[at]*k[J+1]/k[at]:g[at]*k[J]/k[at],H=J,V=B*Math.abs(V),!0)},m=function(e){for(var n=t.dim(u.n),a=V/A[e],o=1;o<=u.n;++o)h[o]=c[o],v[o]=c[o]+a*f[o];for(var i=A[e]-1,s=A[e]/2|0,p=1;p<=i;++p){if(u.denseOutput&&p===s)for(var o=1;o<=q;++o)x[e][o]=v[l[o]];if(I(r+a*p,v,n),u.denseOutput&&Math.abs(p-s)<=2*e-1){++K;for(var o=1;o<=q;++o)T[K][o]=n[l[o]]}for(var o=1;o<=u.n;++o){var d=h[o];h[o]=v[o],v[o]=d+2*a*n[o]}if(p<=u.stabilityCheckCount&&e<=u.stabilityCheckTableLines){for(var M=0,o=1;o<=u.n;++o)M+=Math.pow(f[o]/D[o],2);for(var m=0,o=1;o<=u.n;++o)m+=Math.pow((n[o]-f[o])/D[o],2);var S=m/Math.max(u.uRound,M);if(S>4)return++C,tt=!0,V*=u.stepSizeReductionFactor,void(rt=!0)}}if(I(r+V,v,n),u.denseOutput&&s<=2*e-1){++K;for(var o=1;o<=q;++o)T[K][o]=n[l[o]]}for(var o=1;o<=u.n;++o)F[e][o]=(h[o]+v[o]+a*n[o])/2;if(C+=A[e],1!==e){for(var w,z=A[e],O=e;O>1;--O){w=Math.pow(z/A[O-1],2)-1;for(var o=1;o<=u.n;++o)F[O-1][o]=F[O][o]+(F[O][o]-F[O-1][o])/w}Q=0;for(var o=1;o<=u.n;++o){var R=Math.max(Math.abs(c[o]),Math.abs(F[1][o]));D[o]=y[o]+E[o]*R,Q+=Math.pow((F[1][o]-F[2][o])/D[o],2)}if(Q=Math.sqrt(Q/u.n),Q*u.uRound>=1||e>2&&Q>=W)return tt=!0,V*=u.stepSizeReductionFactor,void(rt=!0);W=Math.max(4*Q,1);var P=1/(2*e-1),j=Math.pow(u.stepSizeFac1,P);w=Math.min(u.stepSizeFac2/j,Math.max(j,Math.pow(Q/u.stepSafetyFactor1,P)/u.stepSafetyFactor2)),w=1/w,g[e]=Math.min(Math.abs(V)*w,b),$[e]=k[e]/g[e]}},S=function(t,e,r){for(var n=new Array(31),a=1;a<=t;++a){var o=e[a],i=e[2*t+a],s=e[t+a],u=e[3*t+a],c=i-o,f=-u+c,h=s-c;if(e[t+a]=c,e[2*t+a]=f,e[3*t+a]=h,!(r<0)){var v=.5*(o+i)+.125*(f+h),p=c+.25*(f-h),d=-(s-u),l=6*(h-f);if(r>=1&&(n[1]=16*(e[5*t+a]-p),r>=3&&(n[3]=16*(e[7*t+a]-l+3*n[1]),r>=5)))for(var M=5;M<=r;M+=2){var m=M*(M-1)/2,S=m*(M-2)*(M-3)*2;n[M]=16*(e[(M+4)*t+a]+m*n[M-2]-S*n[M-4])}if(n[0]=16*(e[4*t+a]-v),r>=2&&(n[2]=16*(e[6*t+a]-d+n[0]),r>=4))for(var M=4;M<=r;M+=2){var m=M*(M-1)/2,S=M*(M-1)*(M-2)*(M-3);n[M]=16*(e[t*(M+4)+a]+n[M-2]*m-n[M-4]*S)}for(var M=0;M<=r;++M)e[t*(M+4)+a]=n[M]}}},w=function(t,e,r,n,a){return function(o,i){for(var s=0,u=1;u<=q;++u)a[u]===o+1&&(s=u);if(0===s)throw new Error("no dense output available for component "+o);var c=(i-t)/e,f=1-c,h=n[s]+c*(n[q+s]+f*(n[2*q+s]*c+n[3*q+s]*f));if(r<0)return h;for(var v=c-.5,p=n[q*(r+4)+s],d=r;d>=1;--d)p=n[q*(d+3)+s]+p*v/d;return h+Math.pow(c*f,2)*p}},x=t.dim2(p,q),g=t.dim(p),F=t.dim2(p,u.n),A=t.stepSizeSequence(d,p),k=t.dim(p);k[1]=1+A[1];for(var j=2;j<=p;++j)k[j]=k[j-1]+A[j];for(var D=t.dim(u.n),j=1;j<=u.n;++j)D[j]=y[j]+E[j]+Math.abs(c[j]);var B=o-r>=0?1:-1,H=Math.max(2,Math.min(p-1,Math.floor(.6*-t.log10(E[1]+1e-40)+1.5))),V=Math.max(Math.abs(u.initialStepSize),1e-4);V=B*Math.min(V,b,Math.abs(o-r)/2);var _=t.dim(p+1),L=t.dim(2*p),N=r,K=0;if(i){if(u.denseOutput){_[1]=0;for(var j=1;j<=p;++j){var U=4*j-2;A[j]>U&&++U,_[j+1]=_[j]+U}for(var X=1;X<=2*p;++X){for(var Y=.5*Math.sqrt(X/(X+4)),G=Math.pow(1/(X+4),2),J=1;J<=X;++J)G*=Y/J;L[X]=G}K=0}if(!1===i(O+1,N,r,c.slice(1)))return n.EarlyReturn}var Q=0,W=1e10,Z=B*b,$=t.dim(p);$[1]=0;var tt,et,rt=!1,nt=!1,at=0;!function(t){t[t.Start=0]="Start",t[t.BasicIntegrationStep=1]="BasicIntegrationStep",t[t.ConvergenceStep=2]="ConvergenceStep",t[t.HopeForConvergence=3]="HopeForConvergence",t[t.Accept=4]="Accept",t[t.Reject=5]="Reject"}(et||(et={}));var ot=et.Start;t:for(;;)switch(u.debug&&console.log("STATE",et[ot],z,N,r,V,H,at,Z),ot){case et.Start:if(tt=!1,.1*Math.abs(o-r)<=Math.abs(r)*u.uRound)break t;if(V=B*Math.min(Math.abs(V),Math.abs(o-r),b,Math.abs(Z)),(r+1.01*V-o)*B>0&&(V=o-r,nt=!0),0!==z&&u.denseOutput||(I(r,c,f),++C),0===z||nt){K=0,++z;for(var J=1;J<=H;++J){if(at=J,m(J),tt)continue t;if(J>1&&Q<=1){ot=et.Accept;continue t}}ot=et.HopeForConvergence;continue}ot=et.BasicIntegrationStep;continue;case et.BasicIntegrationStep:if(K=0,++z,z>=u.maxSteps)return n.MaxStepsExceeded;at=H-1;for(var J=1;J<=at;++J)if(m(J),tt){ot=et.Start;continue t}ot=2===H||rt?et.ConvergenceStep:Q<=1?et.Accept:Q>Math.pow(A[H+1]*A[H]/4,2)?et.Reject:et.ConvergenceStep;continue;case et.ConvergenceStep:if(m(H),tt){ot=et.Start;continue}if(at=H,Q<=1){ot=et.Accept;continue}ot=et.HopeForConvergence;continue;case et.HopeForConvergence:if(Q>Math.pow(A[H+1]/2,2)){ot=et.Reject;continue}at=H+1,m(at),ot=tt?et.Start:Q>1?et.Reject:et.Accept;continue;case et.Accept:if(!M(u.n))return n.EarlyReturn;ot=et.Start;continue;case et.Reject:H=Math.min(H,at,p-1),H>2&&$[H-1]<$[H]*u.stepSizeFac3&&(H-=1),++R,V=B*g[H],rt=!0,ot=et.BasicIntegrationStep}return n.Converged},j=k();return{y:c.slice(1),outcome:j,nStep:z,xEnd:o,nAccept:O,nReject:R,nEval:C}},t}();a.dim=function(t){return Array(t+1)},a.log10=function(t){return Math.log(t)/Math.LN10},r.Solver=a},{}]},{},[1])(1)});