!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.s=t()}}(function(){return function t(e,a,n){function r(i,s){if(!a[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var h=a[i]={exports:{}};e[i][0].call(h.exports,function(t){var a=e[i][1][t];return r(a?a:t)},h,h.exports,t,e,a,n)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,a){"use strict";var n;!function(t){t[t.Converged=0]="Converged",t[t.MaxStepsExceeded=1]="MaxStepsExceeded",t[t.EarlyReturn=2]="EarlyReturn"}(n=a.Outcome||(a.Outcome={}));var r=function(){function t(t){this.n=t,this.uRound=2.3e-16,this.maxSteps=1e4,this.initialStepSize=1e-4,this.maxStepSize=0,this.maxExtrapolationColumns=9,this.stepSizeSequence=0,this.stabilityCheckCount=1,this.stabilityCheckTableLines=2,this.denseOutput=!1,this.denseOutputErrorEstimator=!0,this.denseComponents=void 0,this.interpolationFormulaDegree=4,this.stepSizeReductionFactor=.5,this.stepSizeFac1=.02,this.stepSizeFac2=4,this.stepSizeFac3=.8,this.stepSizeFac4=.9,this.stepSafetyFactor1=.65,this.stepSafetyFactor2=.94,this.relativeTolerance=1e-5,this.absoluteTolerance=1e-5,this.debug=!1}return t.prototype.grid=function(t,e){var a=this.denseComponents;if(!a){a=[];for(var n=0;n<this.n;++n)a.push(n)}var r;return function(n,o,i,s,c){if(1===n)return e(i,s),void(r=i+t);for(;r<=i;){for(var u=[],h=0,f=a;h<f.length;h++){var l=f[h];u.push(c(l,r))}e(r,u),r+=t}}},t.dim2=function(e,a){for(var n=new Array(e+1),r=1;r<=e;++r)n[r]=t.dim(a);return n},t.stepSizeSequence=function(t,e){var a=new Array(e+1);switch(a[0]=0,t){case 1:for(var n=1;n<=e;++n)a[n]=2*n;break;case 2:a[1]=2;for(var n=2;n<=e;++n)a[n]=4*n-4;break;case 3:a[1]=2,a[2]=4,a[3]=6;for(var n=4;n<=e;++n)a[n]=2*a[n-2];break;case 4:for(var n=1;n<=e;++n)a[n]=4*n-2;break;case 5:for(var n=1;n<=e;++n)a[n]=4*n;break;default:throw new Error("invalid stepSizeSequence selected")}return a},t.prototype.solve=function(e,a,r,o,i){function s(t,e){var a=[0];if(Array.isArray(t))return a.concat(t);for(var n=0;n<e;++n)a.push(t);return a}var c=this,u=[0].concat(r),h=t.dim(this.n),f=t.dim(this.n),l=t.dim(this.n);if(this.maxSteps<=0)throw new Error("maxSteps must be positive");var d=this.maxExtrapolationColumns;if(d<=2)throw new Error("maxExtrapolationColumns must be > 2");var v=this.stepSizeSequence||(this.denseOutput?4:1);if(v<=3&&this.denseOutput)throw new Error("stepSizeSequence incompatible with denseOutput");if(this.denseOutput&&!i)throw new Error("denseOutput requires a solution observer function");if(this.interpolationFormulaDegree<=0||this.interpolationFormulaDegree>=7)throw new Error("bad interpolationFormulaDegree");var m=[0],p=0;if(this.denseOutput)if(this.denseComponents)for(var g=0,M=this.denseComponents;g<M.length;g++){var S=M[g];if(S<0||S>this.n)throw new Error("bad dense component: "+S);m.push(S+1),++p}else{for(var x=1;x<=this.n;++x)m.push(x);p=this.n}if(this.uRound<=1e-35||this.uRound>1)throw new Error("suspicious value of uRound");var w=Math.abs(this.maxStepSize||o-a),y=2*d*d+d,I=s(this.absoluteTolerance,this.n),E=s(this.relativeTolerance,this.n),b=[0,0,0,0],z=b[0],F=b[1],C=b[2],L=b[3],P=Math.max(1,p),R=Math.max(1,(2*d+5)*p),A=t.dim(R),B=t.dim2(y,P),O=function(t,a,n){for(var r=e(t,a.slice(1)),o=0;o<r.length;++o)n[o+1]=r[o]},T=function(){var e,r,s,p=function(t){if(_=a,a+=j,c.denseOutput){s=2*rt-c.interpolationFormulaDegree+1;for(var n=1;n<=P;++n)A[n]=u[m[n]];e=_,r=j;for(var n=1;n<=P;++n)A[P+n]=j*h[m[n]];for(var o=2*P,n=1;n<=P;++n)A[o+n]=b[1][m[n]];for(var p=2;p<=rt;++p)for(var g=R[p],w=p;w>=2;--w)for(var I=Math.pow(g/R[w-1],2)-1,n=1;n<=P;++n)x[w-1][n]=x[w][n]+(x[w][n]-x[w-1][n])/I;for(var E=4*P,n=1;n<=P;++n)A[E+n]=x[1][n];for(var n=1;n<=t;++n)f[n]=b[1][n];O(a,f,l),E=3*P;for(var n=1;n<=P;++n)A[E+n]=l[m[n]]*j;for(var z=1;z<=s;++z){for(var F=(z+1)/2|0,q=F;q<=rt;++q){var K=Math.pow(R[q]/2,z-1);N=H[q+1]-2*q+z;for(var n=1;n<=P;++n)x[q][n]=B[N][n]*K}for(var p=F+1;p<=rt;++p)for(var g=R[p],w=p;w>=F+1;--w)for(var I=Math.pow(g/R[w-1],2)-1,n=1;n<=P;++n)x[w-1][n]=x[w][n]+(x[w][n]-x[w-1][n])/I;E=(z+4)*P;for(var n=1;n<=P;++n)A[E+n]=x[F][n]*j;if(z!==s){for(var q=(z+2)/2|0;q<=rt;++q){var W=H[q+1],X=H[q]+z+1;1===z&&4===v&&(X+=2);var w=void 0;for(w=W;w>=X;w-=2)for(var n=1;n<=P;++n)B[w][n]-=B[w-2][n];if(1===z&&4===v){w=X-2;for(var n=1;n<=P;++n)B[w][n]-=h[m[n]]}}for(var q=(z+2)/2|0;q<=rt;++q)for(var W=H[q+1]-1,X=H[q]+z+2,w=W;w>=X;w-=2)for(var n=1;n<=P;++n)B[w][n]-=B[w-2][n]}}if(M(P,A,s),c.denseOutputErrorEstimator&&s>=1){for(var Y=0,n=1;n<=P;++n)Y+=Math.pow(A[(s+4)*P+n]/k[m[n]],2);if(Y=Math.sqrt(Y/P)*U[s],Z=j/Math.max(Math.pow(Y,1/(s+4)),.01),Y>10)return j=Z,a=_,++L,at=!0,!0}for(var n=1;n<=t;++n)h[n]=l[n]}for(var n=1;n<=t;++n)u[n]=b[1][n];if(++C,i&&i(C+1,_,a,u.slice(1),c.denseOutput&&S(e,r,s,A,m))===!1)return!1;var G;return 2===rt?(G=Math.min(3,d-1),at&&(G=2)):rt<=V?(G=rt,$[rt-1]<$[rt]*c.stepSizeFac3&&(G=rt-1),$[rt]<$[rt-1]*c.stepSizeFac4&&(G=Math.min(rt+1,d-1))):(G=rt-1,rt>3&&$[rt-2]<$[rt-1]*c.stepSizeFac3&&(G=rt-2),$[rt]<$[G]*c.stepSizeFac4&&(G=Math.min(rt,d-1))),at?(V=Math.min(G,rt),j=D*Math.min(Math.abs(j),Math.abs(y[V])),at=!1,!0):(j=G<=rt?y[G]:rt<V&&$[rt]<$[rt-1]*c.stepSizeFac4?y[rt]*T[G+1]/T[rt]:y[rt]*T[G]/T[rt],V=G,j=D*Math.abs(j),!0)},g=function(e){for(var n=t.dim(c.n),r=j/R[e],o=1;o<=c.n;++o)f[o]=u[o],l[o]=u[o]+r*h[o];for(var i=R[e]-1,s=R[e]/2|0,d=1;d<=i;++d){if(c.denseOutput&&d===s)for(var o=1;o<=P;++o)x[e][o]=l[m[o]];if(O(a+r*d,l,n),c.denseOutput&&Math.abs(d-s)<=2*e-1){++N;for(var o=1;o<=P;++o)B[N][o]=n[m[o]]}for(var o=1;o<=c.n;++o){var v=f[o];f[o]=l[o],l[o]=v+2*r*n[o]}if(d<=c.stabilityCheckCount&&e<=c.stabilityCheckTableLines){for(var p=0,o=1;o<=c.n;++o)p+=Math.pow(h[o]/k[o],2);for(var g=0,o=1;o<=c.n;++o)g+=Math.pow((n[o]-h[o])/k[o],2);var M=g/Math.max(c.uRound,p);if(M>4)return++z,tt=!0,j*=c.stepSizeReductionFactor,void(at=!0)}}if(O(a+j,l,n),c.denseOutput&&s<=2*e-1){++N;for(var o=1;o<=P;++o)B[N][o]=n[m[o]]}for(var o=1;o<=c.n;++o)b[e][o]=(f[o]+l[o]+r*n[o])/2;if(z+=R[e],1!==e){for(var S,F=R[e],C=e;C>1;--C){S=Math.pow(F/R[C-1],2)-1;for(var o=1;o<=c.n;++o)b[C-1][o]=b[C][o]+(b[C][o]-b[C-1][o])/S}J=0;for(var o=1;o<=c.n;++o){var L=Math.max(Math.abs(u[o]),Math.abs(b[1][o]));k[o]=I[o]+E[o]*L,J+=Math.pow((b[1][o]-b[2][o])/k[o],2)}if(J=Math.sqrt(J/c.n),J*c.uRound>=1||e>2&&J>=Q)return tt=!0,j*=c.stepSizeReductionFactor,void(at=!0);Q=Math.max(4*J,1);var A=1/(2*e-1),q=Math.pow(c.stepSizeFac1,A);S=Math.min(c.stepSizeFac2/q,Math.max(q,Math.pow(J/c.stepSafetyFactor1,A)/c.stepSafetyFactor2)),S=1/S,y[e]=Math.min(Math.abs(j)*S,w),$[e]=T[e]/y[e]}},M=function(t,e,a){for(var n=new Array(31),r=1;r<=t;++r){var o=e[r],i=e[2*t+r],s=e[t+r],c=e[3*t+r],u=i-o,h=-c+u,f=s-u;if(e[t+r]=u,e[2*t+r]=h,e[3*t+r]=f,!(a<0)){var l=.5*(o+i)+.125*(h+f),d=u+.25*(h-f),v=-(s-c),m=6*(f-h);if(a>=1&&(n[1]=16*(e[5*t+r]-d),a>=3&&(n[3]=16*(e[7*t+r]-m+3*n[1]),a>=5)))for(var p=5;p<=a;p+=2){var g=p*(p-1)/2,M=g*(p-2)*(p-3)*2;n[p]=16*(e[(p+4)*t+r]+g*n[p-2]-M*n[p-4])}if(n[0]=16*(e[4*t+r]-l),a>=2&&(n[2]=16*(e[6*t+r]-v+n[0]),a>=4))for(var p=4;p<=a;p+=2){var g=p*(p-1)/2,M=p*(p-1)*(p-2)*(p-3);n[p]=16*(e[t*(p+4)+r]+n[p-2]*g-n[p-4]*M)}for(var p=0;p<=a;++p)e[t*(p+4)+r]=n[p]}}},S=function(t,e,a,n,r){return function(o,i){for(var s=0,c=1;c<=P;++c)r[c]===o+1&&(s=c);if(0===s)throw new Error("no dense output available for component "+o);var u=(i-t)/e,h=1-u,f=n[s]+u*(n[P+s]+h*(n[2*P+s]*u+n[3*P+s]*h));if(a<0)return f;for(var l=u-.5,d=n[P*(a+4)+s],v=a;v>=1;--v)d=n[P*(v+3)+s]+d*l/v;return f+Math.pow(u*h,2)*d}},x=t.dim2(d,P),y=t.dim(d),b=t.dim2(d,c.n),R=t.stepSizeSequence(v,d),T=t.dim(d);T[1]=1+R[1];for(var q=2;q<=d;++q)T[q]=T[q-1]+R[q];for(var k=t.dim(c.n),q=1;q<=c.n;++q)k[q]=I[q]+E[q]+Math.abs(u[q]);var D=o-a>=0?1:-1,V=Math.max(2,Math.min(d-1,Math.floor(.6*-t.log10(E[1]+1e-40)+1.5))),j=Math.max(Math.abs(c.initialStepSize),1e-4);j=D*Math.min(j,w,Math.abs(o-a)/2);var H=t.dim(d+1),U=t.dim(2*d),_=a,N=0;if(i){if(c.denseOutput){H[1]=0;for(var q=1;q<=d;++q){var K=4*q-2;R[q]>K&&++K,H[q+1]=H[q]+K}for(var W=1;W<=2*d;++W){for(var X=.5*Math.sqrt(W/(W+4)),Y=Math.pow(1/(W+4),2),G=1;G<=W;++G)Y*=X/G;U[W]=Y}N=0}if(!1===i(C+1,_,a,u.slice(1)))return n.EarlyReturn}var J=0,Q=1e10,Z=D*w,$=t.dim(d);$[1]=0;var tt,et,at=!1,nt=!1,rt=0;!function(t){t[t.Start=0]="Start",t[t.BasicIntegrationStep=1]="BasicIntegrationStep",t[t.ConvergenceStep=2]="ConvergenceStep",t[t.HopeForConvergence=3]="HopeForConvergence",t[t.Accept=4]="Accept",t[t.Reject=5]="Reject"}(et||(et={}));var ot=et.Start;t:for(;;)switch(c.debug&&console.log("STATE",et[ot],F,_,a,j,V,rt,Z),ot){case et.Start:if(tt=!1,.1*Math.abs(o-a)<=Math.abs(a)*c.uRound)break t;if(j=D*Math.min(Math.abs(j),Math.abs(o-a),w,Math.abs(Z)),(a+1.01*j-o)*D>0&&(j=o-a,nt=!0),0!==F&&c.denseOutput||(O(a,u,h),++z),0===F||nt){N=0,++F;for(var G=1;G<=V;++G){if(rt=G,g(G),tt)continue t;if(G>1&&J<=1){ot=et.Accept;continue t}}ot=et.HopeForConvergence;continue}ot=et.BasicIntegrationStep;continue;case et.BasicIntegrationStep:if(N=0,++F,F>=c.maxSteps)return n.MaxStepsExceeded;rt=V-1;for(var G=1;G<=rt;++G)if(g(G),tt){ot=et.Start;continue t}ot=2===V||at?et.ConvergenceStep:J<=1?et.Accept:J>Math.pow(R[V+1]*R[V]/4,2)?et.Reject:et.ConvergenceStep;continue;case et.ConvergenceStep:if(g(V),tt){ot=et.Start;continue}if(rt=V,J<=1){ot=et.Accept;continue}ot=et.HopeForConvergence;continue;case et.HopeForConvergence:if(J>Math.pow(R[V+1]/2,2)){ot=et.Reject;continue}rt=V+1,g(rt),ot=tt?et.Start:J>1?et.Reject:et.Accept;continue;case et.Accept:if(!p(c.n))return n.EarlyReturn;ot=et.Start;continue;case et.Reject:V=Math.min(V,rt,d-1),V>2&&$[V-1]<$[V]*c.stepSizeFac3&&(V-=1),++L,j=D*y[V],at=!0,ot=et.BasicIntegrationStep}return n.Converged},q=T();return{y:u.slice(1),outcome:q,nStep:F,xEnd:o,nAccept:C,nReject:L,nEval:z}},t}();r.dim=function(t){return Array(t+1)},r.log10=function(t){return Math.log(t)/Math.LN10},a.Solver=r},{}],2:[function(t,e,a){"use strict";var n=t("odex/src/odex"),r=2*Math.PI,o=function(){function t(e){this.K=e,this.PV=t.principal_value(r)}return t.principal_value=function(t){var e=t-r;return function(a){if(e<=a&&a<t)return a;var n=a-r*Math.floor(a/r);return n<t?n:n-r}},t.prototype.generateSection=function(t,e,a){for(var n=t[0],r=t[1],o=0;o<e;++o){a(n,r);var i=r+this.K*Math.sin(n);n=this.PV(n+i),r=this.PV(i)}},t}();o.twoPi=2*Math.PI,a.StandardMap=o;var i=function(){function t(t){this.paramfn=t,this.S=new n.Solver(3),this.S.denseOutput=!0,this.S.absoluteTolerance=1e-8,this.PV=o.principal_value(Math.PI)}return t.prototype.HamiltonSysder=function(t,e,a,n,r){return function(o,i){var s=i[0],c=i[1],u=i[2],h=Math.pow(e,2),f=a*s,l=Math.sin(c),d=Math.cos(c);return[1,(Math.sin(f)*l*n*e*t*a+u)/(h*t),(-Math.pow(Math.sin(f),2)*d*l*Math.pow(n,2)*e*t*Math.pow(a,2)-Math.sin(f)*d*n*a*u-l*r*h*t)/e]}},t.prototype.LagrangeSysder=function(t,e,a,n){return function(r,o){var i=o[0],s=o[1],c=o[2],u=Math.sin(s);return[1,c,(u*Math.cos(e*i)*a*Math.pow(e,2)-u*n)/t]}},t.prototype.generateSection=function(t,e,a){var n=this,r=this.paramfn(),o=2*Math.PI/r.omega,i=1e3*o,s=this.HamiltonSysder(1,1,r.omega,r.a,9.8);this.S.solve(s,0,[0].concat(t),i,this.S.grid(o,function(t,e){return a(n.PV(e[1]),e[2])}))},t.prototype.evolve=function(t,e,a,n){var r=this.paramfn();console.log("params",r);var o=this.LagrangeSysder(1,r.omega,r.a,9.8),i=performance.now();this.S.solve(o,0,[0].concat(t),e,this.S.grid(a,n)),console.log("evolution took",(performance.now()-i).toFixed(2),"msec")},t}();a.DrivenPendulumMap=i;var s=function(){function t(t,e,a,n){var r=this;this.i=0,this.pt=function(t,e){r.context.beginPath(),r.context.arc(t,e,.01,0,2*Math.PI),r.context.fill(),r.context.closePath(),++r.i},this.canvas=document.getElementById(t),this.M=e,this.context=this.canvas.getContext("2d");var o=[a[1]-a[0],n[1]-n[0]],i=o[0],s=o[1];this.canvas.onmousedown=function(t){var e=[t.offsetX/r.context.canvas.width*i+a[0],n[1]-t.offsetY/r.context.canvas.height*s],o=e[0],c=e[1],u=performance.now();r.Explore(o,c),console.log("exploration",(performance.now()-u).toFixed(2),"msec"),r.onExplore&&r.onExplore(o,c)},this.context.scale(this.context.canvas.width/i,-this.context.canvas.height/s),this.context.translate(-a[0],-n[1]),this.context.fillStyle="rgba(23,64,170,0.5)"}return t.prototype.Explore=function(t,e){this.M.generateSection([t,e],1e3,this.pt)},t}();a.ExploreMap=s;var c=function(){function t(t){var e=this;this.amplitude=.1,this.animLogicalSize=1.3,this.frame=function(){var t=function(t){return e.amplitude*Math.cos(e.omega*t)};e.ctx.clearRect(-e.animLogicalSize,-e.animLogicalSize,2*e.animLogicalSize,2*e.animLogicalSize);var a=e.data[e.frameIndex],n=t(a[0]),r=a[1],o=e.ctx;if(o.lineWidth=.02,o.beginPath(),o.fillStyle="#000",o.arc(0,n,.05,0,2*Math.PI),o.fillStyle="#f00",o.arc(Math.sin(r),n-Math.cos(r),.1,0,2*Math.PI),o.fill(),o.fillStyle="#000",o.beginPath(),o.moveTo(0,n),o.lineTo(Math.sin(r),n-Math.cos(r)),o.stroke(),++e.frameIndex,e.frameIndex<e.data.length)window.requestAnimationFrame(e.frame);else{e.animating=!1;var i=(performance.now()-e.frameStart)/1e3;console.log("animation done",(e.data.length/i).toFixed(2),"fps")}};var a=document.getElementById(t.omegaRangeId),n=document.getElementById(t.tRangeId),r=new i(function(){return{a:e.amplitude,omega:+a.value}}),o=document.getElementById(t.animId);this.ctx=o.getContext("2d"),this.ctx.scale(o.width/(2*this.animLogicalSize),-o.height/(2*this.animLogicalSize)),this.ctx.translate(this.animLogicalSize,-this.animLogicalSize);var c=new s("p",r,[-Math.PI,Math.PI],[-10,10]);c.onExplore=function(a,n){console.log("onExplore",a,n),document.getElementById(t.theta0Id).textContent=a.toFixed(3),document.getElementById(t.thetaDot0Id).textContent=n.toFixed(3),e.initialData=[a,n]};var u=document.getElementById(t.exploreId);a.addEventListener("change",function(e){u.getContext("2d").clearRect(-Math.PI,-10,2*Math.PI,20);var a=e.target;document.getElementById(t.omegaValueId).textContent=(+a.value).toFixed(1)}),n.addEventListener("change",function(e){var a=e.target;document.getElementById(t.tValueId).textContent=a.value}),document.getElementById(t.goButtonId).addEventListener("click",function(){var t=1/60,o=+n.value,i=Math.ceil(o/t);e.data=new Array(i);var s=0;e.omega=+a.value;var c=performance.now();r.evolve(e.initialData,o,t,function(t,a){e.data[s++]=a}),console.log("DE evolution in",(performance.now()-c).toFixed(1),"msec"),e.frameIndex=0,e.frameStart=performance.now(),e.animating||(e.animating=!0,requestAnimationFrame(e.frame))})}return t}();a.DrivenPendulumAnimation=c;var u=function(){function t(t){this.paramfn=t,this.S=new n.Solver(5),this.S.denseOutput=!0,this.S.absoluteTolerance=1e-8}return t.prototype.LagrangeSysder=function(t,e,a,n){var r=9.8;return function(o,i){var s=(i[0],i[1]),c=i[2],u=i[3],h=i[4],f=Math.pow(h,2),l=Math.sin(c),d=-c,v=Math.sin(s),m=Math.pow(u,2);return[1,u,h,(-Math.sin(d+s)*Math.cos(d+s)*t*n*m-Math.sin(d+s)*a*n*f+Math.cos(d+s)*l*r*n-v*r*e-v*r*n)/(Math.pow(Math.sin(d+s),2)*t*n+t*e),(Math.sin(d+s)*Math.cos(d+s)*a*n*f+Math.sin(d+s)*t*e*m+Math.sin(d+s)*t*n*m+v*Math.cos(d+s)*r*e+v*Math.cos(d+s)*r*n-l*r*e-l*r*n)/(Math.pow(Math.sin(d+s),2)*a*n+a*e)]}},t.prototype.evolve=function(t,e,a,n){var r=this.paramfn();console.log("params",this.params);var o=this.LagrangeSysder(r.l1,r.m1,r.l2,r.m2);this.params=r,this.S.solve(o,0,[0].concat(t),e,this.S.grid(a,n))},t}(),h=function(){function t(t){var e=this;this.animLogicalSize=1.3,this.frame=function(){e.ctx.clearRect(-e.animLogicalSize,-e.animLogicalSize,2*e.animLogicalSize,2*e.animLogicalSize);var t=e.data[e.frameIndex];console.log("frameIndex",e.frameIndex,"d",e.data[e.frameIndex]);var a=t[1],n=t[2],r=e.ctx,o=e.params,i=0,s=0,c=o.l1*Math.sin(a),u=-o.l1*Math.cos(a),h=c+o.l2*Math.sin(n),f=u-o.l2*Math.cos(n);if(r.lineWidth=.025,r.strokeStyle="#888",r.beginPath(),r.moveTo(i,s),r.lineTo(c,u),r.lineTo(h,f),r.stroke(),r.fillStyle="#f00",r.beginPath(),r.moveTo(i,s),r.arc(i,s,.05,0,2*Math.PI),r.moveTo(c,u),r.arc(c,u,.1,0,2*Math.PI),r.moveTo(h,f),r.arc(h,f,.1,0,2*Math.PI),r.fill(),++e.frameIndex,e.frameIndex<e.data.length)window.requestAnimationFrame(e.frame);else{e.animating=!1;var l=(performance.now()-e.frameStart)/1e3;console.log("animation done",(e.data.length/l).toFixed(2),"fps")}},this.animating=!1;var a=function(t){return 2*t*Math.PI/360},n=document.getElementById(t.theta0RangeId);n.addEventListener("change",this.valueUpdater(t.theta0ValueId));var r=document.getElementById(t.phi0RangeId);r.addEventListener("change",this.valueUpdater(t.phi0ValueId));var o=document.getElementById(t.tRangeId);o.addEventListener("change",this.valueUpdater(t.tValueId));var i=document.getElementById(t.animId);this.ctx=i.getContext("2d"),this.ctx.scale(i.width/(2*this.animLogicalSize),-i.height/(2*this.animLogicalSize)),this.ctx.translate(this.animLogicalSize,-this.animLogicalSize);var s=function(){return{l1:.5,m1:.5,l2:.5,m2:.5}},c=new u(s);document.getElementById(t.goButtonId).addEventListener("click",function(){var t=1/60,i=+o.value,u=Math.ceil(i/t);e.data=new Array(u);var h=0,f=performance.now();e.params=s(),c.evolve([a(+n.value),a(+r.value),0,0],i,t,function(t,a){e.data[h++]=a}),console.log("evolution in",(performance.now()-f).toFixed(2),"msec"),e.frameIndex=0,e.animating||(e.animating=!0,requestAnimationFrame(e.frame))})}return t.prototype.valueUpdater=function(t){return function(e){return document.getElementById(t).textContent=e.target.value}},t}();a.DoublePendulumAnimation=h},{"odex/src/odex":1}]},{},[2])(2)});